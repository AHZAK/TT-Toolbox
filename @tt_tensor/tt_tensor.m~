function t = tt_tensor(varargin)
%TT_TENSOR Tensor stored as a TT-operator

if (nargin == 0)
    t.d    = int32;
    t.r    = int32;
    t.n    = int32;
    t.core = double;                    % empty tensor
    t = class(t, 'tt_tensor');
    return;
end

% Copy CONSTRUCTOR
if (nargin == 1) && isa(varargin{1}, 'tt_tensor')
    t.d = varargin{1}.d;
    t.r = varargin{1}.r;
    t.n = varargin{1}.n;
    t.core=varargin{1}.core;
    t = class(t, 'tt_tensor');
    return;
end
%From old format
if ( nargin == 1 ) && isa(varargin{1},'cell') 
   tt=varargin{1};
   d=size(tt,1);
   t.r=tt_ranks(tt);
   t.n=tt_size(tt);
   t.core=zeros(tt_mem(tt),1);
   pos=1;
   t.core(pos:pos+numel(tt{1})-1)=tt{1}(:);
   pos = pos + numel(tt{1});
   for i=2:d-1
      sz=numel(tt{i}); 
      cr=tt{i}; cr=permute(cr,[2,1,3]);
      t.core(pos:pos+sz-1) = cr(:);
      pos = pos + sz;
   end
   sz=numel(tt{d});
   cr=tt{d}; cr=permute(cr,[2,1]
   t.core(pos:pos+sz-1) = 
end
return;
